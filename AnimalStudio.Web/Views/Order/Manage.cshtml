@using AnimalStudio.Web.ViewModels.Order
@model OrderSearchFilterViewModel
@{
    ViewData["Title"] = "Manage orders";
}

<div class="d-flex justify-content-between align-items-center mb-3" style="margin-top: 20px;">
    <h2>@ViewData["Title"]</h2>
</div>
<hr />

<form method="get" asp-action="Manage" class="mb-4">
    <div class="row">
	    <div class="col">
		    <input asp-for="SearchQuery" class="form-control" placeholder="Search by animal name..." />
	    </div>
        
	    <div class="col">
		    <select asp-for="AnimalTypeFilter" class="form-control">
			    @if (Model.AllAnimalTypes != null)
			    {
				    <option value="">Filter by animal type...</option>
                    foreach (string animalType in Model.AllAnimalTypes)
				    {
                        <option value="@animalType">@animalType</option>
				    }
			    }
		    </select>
	    </div>

	    <div class="col">
            <select asp-for="ProcedureFilter" class="form-control">
                @if (Model.AllProcedures != null)
                {
                    <option value="">Filter by procedure...</option>
                    foreach (string procedure in Model.AllProcedures)
                    {
                        <option value="@procedure">@procedure</option>
                    }
                }
            </select>
        </div>
        <div class="col">
            <button type="submit" class="btn btn-primary">Filter</button>
        </div>
    </div>
</form>


<table class="table table-hover table-bordered">
    <thead class="table-dark">
        <tr>
            <th scope="col">Animal Name</th>
            <th scope="col">Animal Type</th>
            <th scope="col">Procedure Name</th>
            <th scope ="col">Reservation Date</th>
            <th scope="col">Price</th>
            <th scope="col">Owner</th>
            <th scope="col">Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var order in Model.Orders)
        {
            <tr>
                <td>@order.AnimalName</td>
                <td>@order.AnimalType</td>
                <td>@order.ProcedureName</td>
                <td>@order.ReservationDate</td>
                <td>@order.Price.ToString("C", System.Globalization.CultureInfo.CreateSpecificCulture("bg-BG"))</td>
                <td>@order.Owner</td>
                <td class="text-center">
                    <a asp-controller="Order" asp-action="DeleteOrder" asp-route-id="@order.Id" class="btn btn-danger btn-sm me-2" onclick="return confirm('Are you sure you want to delete this order?');">
                        <i class="bi bi-pencil-square"></i> Remove
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>